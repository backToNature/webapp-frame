module.exports = (function (console, fs, path) {
    var _pub_static = function () {
        var _pri = {};
        var _pub = {};

        var _init = function () {
        };

        _pub['conf'] = function (conf) {
            if (!conf) {
                return;
            }

            if (conf.debug === true) {
                console.enable();
            }
            if (conf.debug === false) {
                console.disable();
            }
        };

        _pub['build'] = function (fileName, srcDir, ofileName) {
            require('./action/build.js').build(fileName, srcDir, ofileName);
        };

        _pub['getDependencies'] = function (fileName, baseDir) {
            return require('./action/analyse.js').getFileDependencies(fileName, baseDir);
        };

        if (this === 'test') {
            _pub._pri = _pri;
            _pub._init = _init;
        } else {
            _init.apply(_pub, arguments);
        }

        return _pub;
    };

    return new _pub_static();
})(
    require('./action/console.js'),
    require('fs'),
    require('path')
);
